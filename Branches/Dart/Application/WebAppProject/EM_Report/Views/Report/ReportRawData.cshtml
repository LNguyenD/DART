@{
    Layout = null;
}
@using (Ajax.BeginForm("RawData", null, new AjaxOptions { UpdateTargetId = "RawData" }, new { Id = "frmRawData" }))
{ 
    <ul class="tab" style="width: 99.85%; height:0px" id="rawDataTab">
        @*<li style="float: right; bottom: 7px;" id="printRawData"><a href="javascript:print()"
            class="printPortRawData" id="printRawDataButton"></a></li>*@
        <li style="float: right; bottom: 15px;" id="closePopup"><a href="javascript:closedPopup('1')"
            class="close-reveal-modal" id="closePopupButton" style="top: 12px; right: 1px">&#215;</a></li>
    </ul> 
              
    var strReportName = Request["reportname"] ?? string.Empty;
    var paramsBuilder = new System.Text.StringBuilder();

    foreach (String key in Request.QueryString.AllKeys)
    {
        if (key.ToLower().IndexOf("reportname") < 0)
        {
            paramsBuilder.Append("&" + key + "=" + Request.QueryString[key]);
        }
    }
    <div id="ifRawCover" style="height: auto">
        <iframe id="ifRaw" src="@Url.Content("~/Reports/CPR/RawReport.aspx?reportpath=/emreporting/reports/" + @strReportName + @paramsBuilder.ToString())" 
            width="100%" height="100%" frameborder="0" scrolling="no" style="margin-top: 0px; display: inline;">
        </iframe>
    </div>
}
<script type="text/javascript">
var windowHeight = $(window).height();
    var windowWidth = $(window).width();
    var popupHeight = 0;

    $(function () {
        $(window).resize(function () {
            var windowHeight = $(window).height();
            $("#ifRaw").contents().find("#divViewer").css("height", windowHeight - 100 + 'px');
            $("#ifRaw").contents().find('body').css("height", windowHeight - 100 + 'px');
            $("#ifRaw").css("height", windowHeight - 100 + 'px');
        });

    });
	
    function print() {
        openPrintPopup(true);
    }

    $(document).ready(function () {
        // set tooltips
        $("#closePopupButton").attr('title', 'Close');
    });
</script>