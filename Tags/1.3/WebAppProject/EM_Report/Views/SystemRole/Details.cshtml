@model EM_Report.Models.System_RolesModel
@{
    ViewBag.Title = "System Role";
    Layout = Request.IsAjaxRequest() ? null : "~/Views/Shared/_Master.cshtml";
}
<script src="@Url.Content("~/scripts/iReport.js")" type="text/javascript"></script>
<link href="@Url.Stylesheet("report.css")" rel="stylesheet" type="text/css" />   
<div class="Wrapper">
    <div class="BoxHeader">
        <span>System Role >> @(Model!=null?"Edit System Role":"Add System Role")</span>
    </div>
    <div class="BoxContent">
       @using (Html.BeginForm())
       {            
            <div class="FormWrapper">
                @if (Model != null)
                {
                    @Html.HiddenFor(e => e.System_RoleId)
                }
                @Html.Partial("_ShowMessage")     
                <div class="LineWrapper First SameLine">
                    <label>System Role Name</label>                    
                    @Html.TextBoxFor(e => e.Name, new { id = "txtName", name = "txtName", @class = "Text" })
					@Html.ValidationMessageFor(e => e.Name) 
                </div>               
                <div class="LineWrapper SameLine">
                    <label>Description</label>
                    @Html.TextAreaFor(e => e.Description, new { id = "txtDescription", @class = "Text" })
					@Html.ValidationMessageFor(e => e.Description) 
                </div>                
                <div class="LineWrapper SameLine"></div>
                <div class="BoxHeader">
                    <span>System Permissions</span>
                </div>
                <table id="tbGrid" name="tbGrid" class="Grid">
                        <thead>
                            <tr>
                                <th class="center"><input type="checkbox" name="chkAll" /></th>
                                <th>System Permissions</th>                                
                                @foreach (var item in (SelectList)ViewBag.Permissions)
                                {
                                    <th class="center">@item.Text</th>                      
                                }                              
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in (SelectList)ViewBag.System_Permissions)
                            {
                                <tr>
                                    <td class="center" style="width:30px;"><input type="checkbox" name="chkItemAll" value="@item.Value" /> </td>
                                    <td>@item.Text</td>  
                                    @foreach (var pItem in (SelectList)ViewBag.Permissions)
                                    {
                                        if (("," + (string)(ViewBag.I_Permissions) + ",").IndexOf("," + item.Value + "_" + pItem.Value + ",") >= 0)
                                        {
                                            <td class="center"><input checked="checked" type="checkbox" name="@("chkItem_" + item.Value)" value="@(item.Value + "_" + pItem.Value)" /> </td>                      
                                        }
                                        else
                                        {
                                            <td class="center"><input type="checkbox" name="@("chkItem_" + item.Value)" value="@(item.Value + "_" + pItem.Value)" /> </td>                      
                                        }
                                    }
                                </tr>
                            }                   		
                        </tbody>
                    </table>                
            </div>
            <div class="CommandWrapper">                
                <a id="cmdSave_SystemRole" class="ButtonSave">Save</a>
                <a class="ButtonBack" href="@Url.Action("index", "systemrole")">Back To List</a>                
            </div>
           <input type="hidden" id="hddSystemPermission" name="hddSystemPermission" />
       }
    </div>  
</div>
