@model IEnumerable<EM_Report.Models.UserModel>
@using EM_Report.BLL.Commons;
@using EM_Report.Helpers;
@{
    ViewBag.Title = "User";
    ViewBag.Heading = "User >> User list";
    Layout = Request.IsAjaxRequest() ? null : "~/Views/Shared/_Master.cshtml";
}  

<div class="Wrapper">
   @using (Ajax.BeginForm("Index", new AjaxOptions { UpdateTargetId = "content", OnBegin = "showLoading", OnComplete = "hideLoading" }))
    {
        <script src="@Url.Content("~/scripts/iReport.js")" type="text/javascript"></script>
        <link href="@Url.Stylesheet("report.css")" rel="stylesheet" type="text/css" />    
        @Html.Partial("_SearchBar")
        <div class="BoxContent" style="border: 1px solid #C8C8C8;">
            <table id="tbGrid" name="tbGrid" style="width:100%;">           
                <tr><td colspan="3" style="height:30px;"></td></tr>
                @{ 
                   if (!ViewData.Model.IsNullOrEmpty())
                   {
                       int i = 0;
                       var list_Users = ((IEnumerable<EM_Report.Models.UserModel>)Model).ToList();
                       while (i < list_Users.Count())
                       {
                            <tr style="margin-bottom:50px;">
                                                @{
                           if (i < list_Users.Count())
                           {
                               for (int j = 0; j < 3; j++)
                               {
                                   if (i < list_Users.Count())
                                   {  
                                                <td style="width:33.3%" valign="top">
                                                    <table style="border:0;width:100%">
                                                        <tr>
                                                            <td valign="top" style="width:10%">
                                                                <table style="border:0;" >
                                                                    <tr>
                                                                        <td align="center"><input type="image" src="@Url.Image("no-avatar.png")" /></td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td align="center"><input type="checkbox" name="chkItem" value="@list_Users.ElementAt(i).UserId" /></td>
                                                                    </tr>
                                                                </table>
                                                            </td>
                                                            <td  valign="top" style="width:90%;vertical-align: top;">
                                                                <table  style="border:0;width:100%" id="tbWrapper_User" >
                                                                    <tr>
                                                                        <td><b>@(list_Users.ElementAt(i).FirstName + " " + list_Users.ElementAt(i).LastName)</b></td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td><b>User Name:</b> <a href="@Url.Action("details/" + list_Users.ElementAt(i).UserId + "", "user")"><strong>@(list_Users.ElementAt(i).UserName)</strong></a></td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td><b>Email:</b> @(list_Users.ElementAt(i).Email)</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td><b>Phone:</b> @(list_Users.ElementAt(i).Phone)</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td><b>User Type:</b> @(list_Users.ElementAt(i).Is_System_User ? "System" : "Report")</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td><b>Status:</b> @(list_Users.ElementAt(i).StatusName)</td>
                                                                    </tr>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </td>                                                
                                           }
                                           i++;
                                       }
                                   }   
                                 }
                            </tr>
                            <tr><td colspan="3" style="height:30px;"></td></tr>
                        }
                    } 
                }      
            </table>        
        </div>
        <div class="Paging">
        <div style="float:right">
            @if (Login.AuthorizeSystemPermission(ResourcesHelper.System_User, ResourcesHelper.Permission_Add))
            {
            <a class="CmdButton Add" href="@Url.Action("details", "user")">Add New</a>
            }
            @if (Login.AuthorizeSystemPermission(ResourcesHelper.System_User, ResourcesHelper.Permission_Update))
            {
            <a id="cmdActive" class="CmdButton Active" value="@ResourcesHelper.StatusActive">Active</a>
            <a id="cmdInActive" class="CmdButton InActive" value="@ResourcesHelper.StatusInactive">InActive</a>
            }
        </div>
        @if (!Model.IsNullOrEmpty())
        {
            @Html.Partial("_UCPaging")                                          
        }
    </div>    
    @Html.Partial("_HiddenAction")
    }   
</div>

