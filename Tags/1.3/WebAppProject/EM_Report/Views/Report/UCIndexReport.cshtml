@model IEnumerable<EM_Report.Models.ReportModel>
@using EM_Report.BLL.Commons;
@using EM_Report.Helpers;
@Html.Partial("_Menu")
<div id="content">
    <div class="Wrapper"  id="boxcontent">
        @using (Ajax.BeginForm("Index", new AjaxOptions { UpdateTargetId = "container", OnBegin = "showLoading", OnComplete = "hideLoading" }))
        {                 
            <script src="@Url.Content("~/scripts/iReport.js")" type="text/javascript"></script>  
            <link href="@Url.Stylesheet("report.css")" rel="stylesheet" type="text/css" /> 
            
                if (Request.IsAjaxRequest())
                {
                    @Html.Partial("_HackIE7")
                }
            
            <div class="BoxHeader">
                <div class="DisplayEntry">
                    <div>
                        <label>
                            Show
                        </label>
                        &nbsp;</div>
                    <div class="WrapperSelectBox">
                        @Html.DropDownList("cboDisplayEntry", (SelectList)ViewBag.DisplayEntry) @EM_Report.BLL.Resources.Resource.txtItems
                    </div>
                    <div>
                        &nbsp;&nbsp;<label>items</label>
                    </div>
                </div>
                <div class="SearchBox">
                    <div>
                        <label>
                            Module:</label>&nbsp;</div>
                    <div class="WrapperSelectBox SelectCategory">
                        @Html.DropDownList("cboCategory", (SelectList)ViewBag.CategoryList)
                    </div>
                    <div>
                        <label>
                            &nbsp;&nbsp;&nbsp;&nbsp;Search:</label></div>
                    <div class="SearchInput">
                        <input type="text" id="txtInput" name="search_input" value="@ViewBag.SearchValue" />
                    </div>
                    <div>
                        <input id="btnSearch" type="image" title="Search" src="@Url.Image("btnSearch.png")" />
                    </div>
                </div>
            </div>
            <div class="BoxContent">
                <table id="tbGrid" name="tbGrid" class="Grid">
                    <thead>
                        <tr>
                            <th sortby="Name" sortdir="" style="width: *%;">
                                <span class="css_right ui-icon ui-icon-carat-2-n-s"></span>report name
                            </th>
                            <th sortby="CategoryName" sortdir="" style="width: 15%;">
                                <span class="css_right ui-icon ui-icon-carat-2-n-s"></span>category name
                            </th>
                            <th sortby="Description" sortdir="" style="width: 15%;">
                                <span class="css_right ui-icon ui-icon-carat-2-n-s"></span>description
                            </th>
                            <th class="action last-column" style="width: 100px;">
                                <span class="css_right"></span>actions
                            </th>
                        </tr>
                    </thead>
                    @if (!ViewData.Model.IsNullOrEmpty())
                    {               
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr class=" @ViewHelpers.RowCss(true)">
                                    <td title="@item.Name">
                                        <a href="@Url.Action("viewinfo", "report", new { reportpath = item.Url, rId = item.ReportId })">@item.Name</a>
                                    </td>
                                    <td title="@item.CategoryName">@item.CategoryName
                                    </td>
                                    <td title="@item.Description">@item.Description
                                    </td>
                                    <td class="action last-column">
                                        <a href="@Url.Action("index", "subscription", new { reportid = item.ReportId })" title="view subscription">
                                            <img src="@Url.Image("btnSubscription.png")" />
                                        </a><a  id="favorite_@(item.ReportId)" title="@(!item.Is_Favorite ? "add favorite" : "remove favorite")">
                                            <img src="@Url.Image(!item.Is_Favorite ? "icon-addfavorite.png" : "icon-removefavorite.png")" />
                                        </a>
                                    </td>
                                </tr>                           
                            }
                        </tbody>                        
                    }
                </table>
            </div>
            <div class="Paging">
                @if (!Model.IsNullOrEmpty())
                {
                    @Html.Partial("_UCPaging")                                          
                }
            </div>    
            @Html.Partial("_HiddenAction")
        }
    </div>    
</div>
