@model List<EM_Report.Domain.Report>
@{
    ViewBag.Title = "Reports";
    ViewBag.Heading = "Report >> Report list";
    Layout = Request.IsAjaxRequest() ? null : "~/Views/Shared/_Master.cshtml";
}
@using EM_Report.Common.Utilities;
@using EM_Report.Helpers;

<div class="wrapper">
	@using (Ajax.BeginForm("Index", new AjaxOptions { UpdateTargetId = "content", OnBegin = "showLoading", OnComplete = "hideLoading" }))
	{
     @Html.AntiForgeryToken()  
     <link href="@Url.ContentV("~/Css/jquery.selectbox.css")" rel="stylesheet" type="text/css" />        
       <script type="text/javascript" src="@Url.ContentV("~/scripts/custom_javascript.js")"></script> 
       <script src="@Url.ContentV("~/Scripts/iReport.js")" type="text/javascript"></script>
       <link href="@Url.ContentV("~/Css/report.css")" rel="stylesheet" type="text/css" />
        @Html.Partial("_SearchBar")
	    <div class="w_100p">
		    @using (Html.BeginForm())
            {
		        <div class="formWrap">
			        <h1>Report List</h1>
			        <table name="tbGrid" cellspacing="0" cellpadding="0" class="tbl">
				        <thead>
					        <tr>
                                <th class="col_3 first center"><input type="checkbox" name="chkAll" /></th>
						        <td sortby="Name" sortdir="" class="col_17"><span class="css_right ui-icon ui-icon-carat-2-n-s"></span>Report Name</td>
						        <td sortby="CategoryName" sortdir="" class="10"><span class="css_right ui-icon ui-icon-carat-2-n-s"></span>Category Name</td>
						        <td sortby="Url" sortdir="" class="col_17"><span class="css_right ui-icon ui-icon-carat-2-n-s"></span>Url</td>
						        <td sortby="Description" sortdir="" class="col_17"><span class="css_right ui-icon ui-icon-carat-2-n-s"></span>Description</td>
						        <td sortby="StatusName" sortdir="" class="col_7 center"><span class="css_right ui-icon ui-icon-carat-2-n-s"></span>Status</td>
						        <td sortby="Create_Date" sortdir="" class="col_10 center"><span class="css_right ui-icon ui-icon-carat-2-n-s"></span>@EM_Report.Domain.Resources.Resource.txtCreatedOn</td>
						        <td sortby="OwnerName" sortdir="" class="col_7"><span class="css_right ui-icon ui-icon-carat-2-n-s"></span>@EM_Report.Domain.Resources.Resource.txtOwner</td>						        
					        </tr>
				        </thead>
				        @if (!ViewData.Model.IsNullOrEmpty())
                        {
                            var i = 0;
					        <tbody>
						        @foreach (var item in Model)
                                {
							        <tr class="@(i % 2 == 0 ? "odd" : "even")">
								        <th><input type="checkbox" name="chkItem" value="@(item.ReportId)" id="chkId@(item.ReportId)"/></th>
								        <td title="@item.Name"><a href="@Url.Action("details", "report", new { id = item.ReportId, systemid = ViewBag.currentSystemId })"></a></td>
								        <td title="@item.CategoryName"></td>
								        <td title="@item.Url"></td>
								        <td title="@item.Description"></td>
								        <td title="@item.StatusName" class="center">@item.StatusName</td>
								        <td title="@(Base.GetDatetimeText(item.Create_Date))" class="center">@(Base.GetDatetimeText(item.Create_Date))</td>
								        <td title="@(item.OwnerName)">@(item.OwnerName)</td>								        
							        </tr>
                                    i++;
                                }
					        </tbody>
                        }
			        </table>
			        <br />
			        <div class="right">
                        @if (Login.AuthorizeSystemPermission(ResourcesHelper.System_Report, ResourcesHelper.Permission_Add))
                        {
                        <span class="btnPurple"><input type="button" value="@EM_Report.Domain.Resources.Resource.Action_AddNew" onclick="window.location = ('@Url.Action("details", "report", new { systemid = ViewBag.currentSystemId })')"/></span>
                        }
                        @if (Login.AuthorizeSystemPermission(ResourcesHelper.System_Report, ResourcesHelper.Permission_Update))
                        {
                        <span class="btnPurple"><input type="button" id="cmdActive" value="@ResourcesHelper.Action_Active" /></span>
                        <span class="btnPurple"><input type="button" id="cmdInActive" value="@ResourcesHelper.Action_InActive" /></span>
                        }
                    </div>
                    <div class="Paging">
                        @if (!Model.IsNullOrEmpty())
                        {
				            @Html.Partial("_UCPaging")
                        }
                    </div>
                    @Html.Partial("_HiddenAction")
		        </div>
            }
	    </div>
	}
</div>